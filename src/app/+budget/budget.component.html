<div id="col-right" class="col-right ">
<div class="container-fluid primary-content">
   <!-- PRIMARY CONTENT HEADING -->
   <div class="primary-content-heading clearfix">
      <h2 class="pull-left">BUDGET</h2>
      <badge-list></badge-list>
   </div>
   <hr class="alt">
   <div class="row" *ngIf="editBudget || addBudget">
      <div class="col-sm-12">
         <div class="widget bottom-30px">
            <div class="widget-header">
               <h3 class="">{{(editBudget)? 'Update':'Add'}} budget</h3>
            </div>

            <div class="widget-content">
            <alert *ngIf="model.budget && getBalance(budgetBreakup)>model.budget"type="danger" dismissible="true">
              Reduce expense below Budget Limit
            </alert>
            <alert *ngIf="!model.budget" type="danger" dismissible="true">
              Please Enter Budget Limit
            </alert>
               <form (ngSubmit)="updateBudget()">
                  <div class="inputs">
                     <div class="row">
                        <div class="col-sm-12">
                           <div class="form-group form-group-lg label-floating">
                              <label for="i5" class="control-label">Budget limit</label>
                              <input type="number" class="form-control" [(ngModel)]="model.budget">
                           </div>
                        </div>
                     </div>
                     <div class="row">
                        <div class="col-sm-4" *ngFor="let account of accounts">
                           <div class="form-group form-group-lg label-floating">
                              <label class="control-label">{{account.name}}</label>
                              <input type="number" class="form-control" [(ngModel)]="budgetBreakup[account.name]">
                           </div>
                        </div>
                     </div>
                  </div>
                  <button [disabled]="!(model.budget && getBalance(budgetBreakup)<model.budget)" type="submit" class="btn btn-raised btn-primary">{{(addBudget) ? 'Add' : 'Update'}}</button>
                  <button type="button" (click)="cancel()" class="btn btn-link" *ngIf="!addBudget">Cancel</button>
               </form>
            </div>
         </div>
      </div>
   </div>
   <div  *ngIf="!editBudget && !addBudget">
      <div class="row" >
         <div class="col-sm-12 cards">
            <h3 class="pull-left">Budget Summary</h3>
            <button class="btn btn-raised btn-primary pull-right" (click)="edit()">Update budget</button>
            <div class="clearfix"></div>
            <div class="row">
               <div class="col-md-4">
                  <div class="widget bottom-30px">
                     <h3 class="">Budget Balance</h3>
                     <div class="widget-content"  *ngIf="expenseAccount">
                        <p [ngClass]="{'text-success' : isExpenseLessThanBudget(), 'text-danger': !isExpenseLessThanBudget()}">{{model.budget - expenseAccount.amount  | currency:'USD':'$'}}</p>
                     </div>
                  </div>
               </div>
               <div class="col-md-4">
                  <div class="widget bottom-30px">
                     <h3 class="">Budget Limit</h3>
                     <div class="widget-content ">
                        <p class="text-success">{{model.budget | currency:'USD':'$'}}</p>
                     </div>
                  </div>
               </div>
               <div class="col-md-4">
                  <div class="widget bottom-30px">
                     <h3 class="">Expense</h3>
                     <div class="widget-content" *ngIf="expenseAccount">
                        <p>{{expenseAccount.amount | currency:'USD':'$'}}</p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-sm-12">
         	<h3>Budget Breakdown</h3>
            <div class="widget">
               <div class="widget-content">
               	<div *ngFor="let account of accounts">
                  <div class="bs-example" data-example-id="animated-progress-bar">
                     <div class="progress">
                        <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"  [ngStyle]="{'width': account.budget/model.budget*100 + '%'}"><span class="sr-only">45% Complete</span></div>
                     </div>
                  </div>
                   {{account | json}}
              </div>
                 
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<!-- 
   <div id="col-right" class="col-right ">
      <div class="container-fluid primary-content">
        
         <div class="primary-content-heading clearfix">
            <h2 class="pull-left">BUDGET</h2>
        </div>
         <hr class="alt">
   		      <p>
   		  budget works!
   		</p>
   		<div *ngIf="!editBudget">
   		Budget : {{model.budget}}
   
   		Budget breakup
   
   		<div *ngFor="let account of accounts">
   			{{account | json}}
   		</div>
   		<button type="button" (click)="edit()">Edit Budget</button>
   		</div>	
   
   	
   		<div *ngIf="editBudget" >
   			<form (ngSubmit)="updateBudget()">
   				Budget: <input type="number" [(ngModel)]="model.budget">
   				<div *ngFor="let account of accounts">
   					{{account.name}} : <input type="number" [(ngModel)]="budgetBreakup[account.name]">
   				</div>
   				<button type="submit">Update</button>
   				<button type="cancel" (click)="cancel()">Cancel</button>
   			</form>
   		</div>
   </div> -->